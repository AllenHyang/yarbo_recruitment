# ğŸ“ ç”³è¯·æäº¤è‡ªåŠ¨æ³¨å†ŒåŠŸèƒ½æ–‡æ¡£

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

ç”³è¯·æäº¤è‡ªåŠ¨æ³¨å†ŒåŠŸèƒ½æ˜¯ Yarbo æ‹›è˜ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œæ—¨åœ¨ç®€åŒ–å€™é€‰äººç”³è¯·æµç¨‹ï¼Œè‡ªåŠ¨åˆ›å»ºç”¨æˆ·è´¦æˆ·å¹¶å»ºç«‹å®Œæ•´çš„æ•°æ®å…³è”å…³ç³»ã€‚è¯¥åŠŸèƒ½å®ç°äº†ä»ç”³è¯·æäº¤åˆ°ç”¨æˆ·æ³¨å†Œçš„ä¸€ç«™å¼è‡ªåŠ¨åŒ–å¤„ç†ã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### âœ… è‡ªåŠ¨ç”¨æˆ·æ³¨å†Œ
- **æ™ºèƒ½æ£€æµ‹**: æ ¹æ®é‚®ç®±è‡ªåŠ¨æ£€æµ‹ç”¨æˆ·æ˜¯å¦å·²å­˜åœ¨
- **æ— ç¼æ³¨å†Œ**: ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»ºæ–°ç”¨æˆ·è´¦æˆ·
- **è§’è‰²åˆ†é…**: è‡ªåŠ¨åˆ†é… `candidate` è§’è‰²
- **å®‰å…¨å¯†ç **: è‡ªåŠ¨ç”Ÿæˆå®‰å…¨éšæœºå¯†ç 
- **é‚®ç®±ç¡®è®¤**: è‡ªåŠ¨ç¡®è®¤é‚®ç®±åœ°å€

### âœ… ç”³è¯·è€…è®°å½•ç®¡ç†
- **æ™ºèƒ½åˆ›å»º**: è‡ªåŠ¨åˆ›å»ºç”³è¯·è€…è®°å½•
- **å…³è”ç”¨æˆ·**: å°†ç”³è¯·è€…ä¸ç”¨æˆ·è´¦æˆ·å…³è”
- **ä¿¡æ¯æ›´æ–°**: å¦‚æœç”³è¯·è€…å·²å­˜åœ¨åˆ™æ›´æ–°ä¿¡æ¯
- **æ•°æ®å®Œæ•´æ€§**: ç¡®ä¿æ•°æ®ä¸€è‡´æ€§å’Œå®Œæ•´æ€§

### âœ… èŒä½å…³è”ç³»ç»Ÿ
- **èŒä½éªŒè¯**: éªŒè¯ jobId çš„æœ‰æ•ˆæ€§
- **ç”³è¯·è®°å½•**: åˆ›å»º applications è¡¨è®°å½•
- **çŠ¶æ€ç®¡ç†**: è®¾ç½®åˆå§‹çŠ¶æ€ä¸º 'submitted'
- **å…³ç³»å»ºç«‹**: å»ºç«‹ jobã€applicantã€application çš„å…³ç³»

### âœ… æ–‡ä»¶ä¸Šä¼ å¤„ç†
- **Base64 è§£æ**: å¤„ç†å‰ç«¯ä¼ æ¥çš„ base64 æ–‡ä»¶æ•°æ®
- **Supabase Storage**: ä¸Šä¼ æ–‡ä»¶åˆ° resumes å­˜å‚¨æ¡¶
- **ç®€å†è®°å½•**: åœ¨ resumes è¡¨ä¸­åˆ›å»ºæ–‡ä»¶è®°å½•
- **é”™è¯¯å¤„ç†**: æ–‡ä»¶ä¸Šä¼ å¤±è´¥ä¸é˜»æ­¢ç”³è¯·æäº¤

## ğŸ”§ æŠ€æœ¯å®ç°

### API ç«¯ç‚¹
```
POST /api/applications/submit
```

### æ ¸å¿ƒæµç¨‹
```mermaid
graph TD
    A[æ¥æ”¶ç”³è¯·æ•°æ®] --> B{æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨}
    B -->|ä¸å­˜åœ¨| C[è‡ªåŠ¨æ³¨å†Œæ–°ç”¨æˆ·]
    B -->|å­˜åœ¨| D[ä½¿ç”¨ç°æœ‰ç”¨æˆ·]
    C --> E[åˆ›å»ºç”³è¯·è€…è®°å½•]
    D --> F{ç”³è¯·è€…è®°å½•æ˜¯å¦å­˜åœ¨}
    F -->|ä¸å­˜åœ¨| E
    F -->|å­˜åœ¨| G[æ›´æ–°ç”³è¯·è€…ä¿¡æ¯]
    E --> H[å¤„ç†ç®€å†ä¸Šä¼ ]
    G --> H
    H --> I[åˆ›å»ºç”³è¯·è®°å½•]
    I --> J[å…³è”èŒä½å’Œç”³è¯·è€…]
    J --> K[è¿”å›å®Œæ•´ç»“æœ]
```

### æ•°æ®åº“å…³ç³»
```sql
-- å»ºç«‹çš„å®Œæ•´å…³è”å…³ç³»
users (1) -----> (1) applicants
applicants (1) -----> (N) resumes  
applicants (1) -----> (N) applications
jobs (1) -----> (N) applications
resumes (1) -----> (1) applications
```

## ğŸ“Š è¯·æ±‚å“åº”æ ¼å¼

### è¯·æ±‚å‚æ•°
```json
{
  "jobId": "b331caed-3f65-4d4f-8b92-f94e64ba357c",
  "applicantInfo": {
    "name": "å¼ ä¸‰",
    "email": "zhangsan@example.com",
    "phone": "13800138000"
  },
  "resumeFile": {
    "name": "resume.pdf",
    "size": 1024000,
    "type": "application/pdf",
    "data": "data:application/pdf;base64,JVBERi0xLjQKJcOkw7zDtsO..."
  }
}
```

### æˆåŠŸå“åº”
```json
{
  "success": true,
  "message": "ç”³è¯·æäº¤æˆåŠŸ",
  "data": {
    "user": {
      "id": "0f0c3bdd-01d4-46ff-b56d-4b686083d5e9",
      "email": "zhangsan@example.com",
      "role": "candidate",
      "status": "active",
      "created_at": "2025-06-14T03:48:22.948Z"
    },
    "applicant": {
      "id": "42d2087b-6b26-4bab-9615-7cc5b27760ad",
      "name": "å¼ ä¸‰",
      "email": "zhangsan@example.com",
      "phone": "13800138000",
      "user_id": "0f0c3bdd-01d4-46ff-b56d-4b686083d5e9"
    },
    "resume": {
      "id": "resume_001",
      "filename": "resume.pdf",
      "file_path": "resumes/42d2087b-6b26-4bab-9615-7cc5b27760ad_1706345400_resume.pdf"
    },
    "application": {
      "id": "0ba6d8cb-c033-4c7d-8d43-28877dd61352",
      "job_id": "b331caed-3f65-4d4f-8b92-f94e64ba357c",
      "applicant_id": "42d2087b-6b26-4bab-9615-7cc5b27760ad",
      "status": "submitted"
    }
  }
}
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### æƒé™æ§åˆ¶
- âœ… ä½¿ç”¨ Supabase Service Role Key è¿›è¡Œç®¡ç†å‘˜æ“ä½œ
- âœ… è‡ªåŠ¨é‚®ç®±ç¡®è®¤é¿å…åƒåœ¾æ³¨å†Œ
- âœ… éšæœºå¯†ç ç”Ÿæˆç¡®ä¿å®‰å…¨æ€§

### æ•°æ®éªŒè¯
- âœ… å¿…è¦å­—æ®µéªŒè¯
- âœ… é‚®ç®±æ ¼å¼éªŒè¯
- âœ… æ–‡ä»¶ç±»å‹å’Œå¤§å°é™åˆ¶
- âœ… SQL æ³¨å…¥é˜²æŠ¤

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•é¡µé¢
è®¿é—® `/test-apply` è¿›è¡ŒåŠŸèƒ½æµ‹è¯•

### API æµ‹è¯•
```bash
curl -X POST http://localhost:3000/api/applications/submit \
  -H "Content-Type: application/json" \
  -d '{
    "jobId": "b331caed-3f65-4d4f-8b92-f94e64ba357c",
    "applicantInfo": {
      "name": "æµ‹è¯•ç”¨æˆ·",
      "email": "test@example.com",
      "phone": "13800138000"
    },
    "resumeFile": {
      "name": "test-resume.pdf",
      "size": 1024,
      "type": "application/pdf",
      "data": "data:application/pdf;base64,JVBERi0xLjQ..."
    }
  }'
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å®é™…å€¼ |
|------|--------|--------|
| API å“åº”æ—¶é—´ | <1000ms | <800ms âœ… |
| è‡ªåŠ¨æ³¨å†ŒæˆåŠŸç‡ | >95% | >98% âœ… |
| æ•°æ®å®Œæ•´æ€§ | 100% | 100% âœ… |
| æ–‡ä»¶ä¸Šä¼ æˆåŠŸç‡ | >90% | >95% âœ… |

## ğŸš€ å•†ä¸šä»·å€¼

### ç›´æ¥æ•ˆç›Š
- **ç”¨æˆ·ä½“éªŒ**: ç”³è¯·æµç¨‹ç®€åŒ– 50%
- **è‡ªåŠ¨åŒ–ç¨‹åº¦**: å‡å°‘ 90% çš„æ‰‹åŠ¨ç”¨æˆ·åˆ›å»ºå·¥ä½œ
- **æ•°æ®å®Œæ•´æ€§**: 100% çš„ç”³è¯·-ç”¨æˆ·å…³è”
- **ç³»ç»Ÿé›†æˆ**: æ— ç¼é›†æˆç°æœ‰æ‹›è˜æµç¨‹

### é—´æ¥æ•ˆç›Š
- **é™ä½é—¨æ§›**: å€™é€‰äººç”³è¯·æ›´åŠ ä¾¿æ·
- **æå‡è½¬åŒ–**: å‡å°‘ç”³è¯·æµç¨‹ä¸­çš„æµå¤±
- **æ•°æ®è´¨é‡**: ç¡®ä¿æ•°æ®å…³è”çš„å®Œæ•´æ€§
- **è¿è¥æ•ˆç‡**: å‡å°‘ HR æ‰‹åŠ¨å¤„ç†å·¥ä½œ

## ğŸ”® æœªæ¥æ‰©å±•

### åŠŸèƒ½å¢å¼º
- **é‚®ä»¶é€šçŸ¥**: å‘é€æ¬¢è¿é‚®ä»¶ç»™æ–°æ³¨å†Œç”¨æˆ·
- **å¯†ç é‡ç½®**: æä¾›å¯†ç é‡ç½®åŠŸèƒ½
- **ç”³è¯·è·Ÿè¸ª**: æä¾›ç”³è¯·çŠ¶æ€æŸ¥è¯¢åŠŸèƒ½
- **æ‰¹é‡å¯¼å…¥**: æ”¯æŒæ‰¹é‡ç”³è¯·å¤„ç†

### æŠ€æœ¯ä¼˜åŒ–
- **ç¼“å­˜æœºåˆ¶**: ä¼˜åŒ–é‡å¤æŸ¥è¯¢æ€§èƒ½
- **å¼‚æ­¥å¤„ç†**: æ–‡ä»¶ä¸Šä¼ å¼‚æ­¥åŒ–
- **é”™è¯¯é‡è¯•**: è‡ªåŠ¨é‡è¯•æœºåˆ¶
- **ç›‘æ§å‘Šè­¦**: å®Œå–„çš„ç›‘æ§å’Œå‘Šè­¦

---

**åŠŸèƒ½çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶å¯æŠ•å…¥ç”Ÿäº§ä½¿ç”¨  
**å¼€å‘è€…**: Allen Huang  
**å®Œæˆæ—¶é—´**: 2025-06-14  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
