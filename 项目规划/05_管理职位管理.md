# 阶段5: 管理后台 - 职位管理

## 1. 阶段目标
- 为HR和管理员提供完整的职位生命周期管理功能。
- **产出**: 功能完善的 `admin-jobs.html` 页面。

## 2. 包含的用户故事
- **作为一名HR**, 我希望能方便地发布一个新的职位，包括填写职位描述、要求和薪资范围。
- **作为一名HR**, 我想在一个清晰的列表里看到所有正在招聘的、已暂停的和已关闭的职位，并能直观地看到每个职位收到了多少份申请。
- **作为一名HR**, 我希望能随时编辑一个已发布职位的信息，或者在招聘需求变更时，能一键"暂停"或"关闭"某个职位。

## 3. 功能需求
- **职位列表页 (`admin-jobs.html`)**:
    - **页面布局**: 以卡片网格的形式展示所有职位。
    - **主要操作**:
        - **"发布新职位"按钮**: 点击后跳转到职位创建/编辑页。
        - **筛选器**: 支持按职位状态（招聘中/已暂停/已关闭）、部门进行筛选。
    - **职位卡片**:
        - **显示信息**:
            - 职位名称、所属部门。
            - 职位状态（用不同颜色的标签区分）。
            - 关键统计数据：申请总数、待处理数、面试中。
        - **卡片操作**:
            - `编辑`按钮。
            - `暂停/恢复`按钮（根据当前状态动态显示）。
            - `查看详情`按钮。
            - `关闭`按钮。

- **职位创建/编辑页 (可为新页面或模态框)**:
    - **表单字段**:
        - `职位名称` (文本输入，必填)
        - `招聘类型` (下拉选择：社会招聘 / 校园招聘 / 实习，必填)
        - `所属部门` (文本输入，必填)
        - `工作地点` (文本输入，必填)
        - `薪资范围` (文本输入)
        - `职位描述` (textarea, 支持Markdown): 使用 `Textarea` 组件。
        - `任职要求` (textarea, 支持Markdown): 使用 `Textarea` 组件。
    - **操作**:
        - "保存为草稿"按钮。
        - "发布职位"按钮。

## 4. 验收标准
- HR可以成功创建一个新的职位并发布。
- HR可以在列表中看到所有职位，并能使用筛选功能。
- HR可以对一个现有职位进行编辑、暂停、恢复和关闭操作。
- 职位卡片上能正确（静态）显示统计数据。

## 5. 技术实现说明
- **Supabase 数据模型**:
    - 需要在Supabase中创建 `jobs` 表。
    - **`jobs` 表结构建议**:
        - `id` (uuid, 主键)
        - `created_at` (timestamp)
        - `title` (text)
        - `department` (text)
        - `location` (text)
        - `salary_range` (text)
        - `description` (text)
        - `requirements` (text)
        - `status` (text, '发布中' / '已暂停' / '已关闭')
- **富文本编辑器**:
    - 职位描述和要求字段，可以集成一个轻量级的富文本编辑器，如 `react-quill` 或 `tiptap`，以提升HR的编辑体验。存储的内容为HTML或JSON。
- **状态更新**:
    - 职位的CURD操作直接调用 `supabase-js` 对应的方法来操作 `jobs` 表。
    - 推荐使用 `useSWR` 或 `React Query (TanStack Query)` 来处理数据的获取和状态的自动刷新，当编辑或更新职位后，列表能自动更新。
- **Shadcn/UI 组件**:
    - **添加命令**: `npx shadcn@latest add table dialog dropdown-menu input textarea`
    - 使用 `Table` 构建主列表。
    - 使用 `Dialog` 作为新建/编辑的模态框。
    - 使用 `DropdownMenu` 实现行内操作菜单。

## 6. 验收标准 (Acceptance Criteria)
- ✅ 职位管理页面能以 `Table` 的形式正确拉取并展示所有职位。
- ✅ 点击"发布新职位"能打开表单，填写所有信息后能成功在数据库创建一条新记录。
- ✅ 点击"编辑"按钮能回填职位信息，修改后能成功更新。
- ✅ 点击"暂停/发布"按钮能正确切换该职位的 `status` 字段，并且前台网站的可见性也随之改变。
- ✅ "总申请人数"能正确统计并显示（需要对 `candidates` 表进行关联查询）。
- ✅ 点击"查看申请人"能正确跳转到候选人页面，并带上职位ID作为筛选参数。 